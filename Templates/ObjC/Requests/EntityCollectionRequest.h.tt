<#@ template debug="true" hostspecific="true" language="C#" #>
<#@ include file="SharedObjC.template.tt"#>
<#
var prop = host.CurrentType.AsOdcmProperty();
var innerEntity = prop.Type;

var collectionNamer = prop.IsReference() ? "CollectionWithReferences" : "Collection";

var propName = writer.GetPrefix() + prop.Class.Name.ToUpperFirstChar() + prop.Name.ToUpperFirstChar();
var propRequestBuilder = propName + collectionNamer +"Builder";
var propRequest = propName + collectionNamer + "Request";

var innerEntityType = innerEntity.GetTypeString();
var entityRequestBuilder = innerEntityType + "RequestBuilder";
var entityRequest = innerEntityType + "Request";
if (innerEntityType.Equals(propName))
{
    propName = propName + collectionNamer;
}
#>

@class <#=entityRequest#>, <#=writer.GetStaticCodePrefix()#>URLSessionDataTask;

#import "<#=writer.GetPrefix()#>Models.h"
#import "<#=writer.GetStaticCodePrefix()#>CollectionRequest.h"

typedef void (^<#=innerEntityType#>CompletionHandler)(<#=innerEntityType#> *response, NSError *error);

typedef void (^<#=propName#>CompletionHandler)(<#=writer.GetStaticCodePrefix() + collectionNamer#> *response, <#=propRequest#> *nextRequest, NSError *error);

@interface <#=propRequest#> : <#=writer.GetStaticCodePrefix()#>CollectionRequest

- (<#=writer.GetStaticCodePrefix()#>URLSessionDataTask *)getWithCompletion:(<#=propName#>CompletionHandler)completionHandler;
<#
    if (!prop.LongDescriptionContains("readonly") && !prop.IsReference())
    {
#>

- (<#=writer.GetStaticCodePrefix()#>URLSessionDataTask *)add<#=innerEntity.Name.ToUpperFirstChar()#>:(<#=innerEntityType#>*)<#=innerEntity.Name.ToLowerFirstChar()#> withCompletion:(<#=innerEntityType#>CompletionHandler)completionHandler;

<#
    }
#>
@end
